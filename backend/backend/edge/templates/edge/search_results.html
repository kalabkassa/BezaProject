{% extends 'edge/navbar.html' %} {% block title %}Semantic Search{% endblock title %}
{% block content %}
    <div class="container mt-4">
        <h1>Search Results</h1>

        <form method="GET" action="{% url 'search_results' %}" class="mb-4">
            {% csrf_token %}
            {{ form }}
            <button type="submit" class="btn btn-primary">Search</button>
        </form>

        <table class="table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>First Name</th>
                    <th>Last Name</th>
                    <th>Age</th>
                    <th>Temprature</th>
                    <th>Heart Rate</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                {% for user, user_items in results %}
                    <tr>
                        <td>{{ user_items.patient_id }}</td>
                        <td>{{ user_items.first_name }}</td>
                        <td>{{ user_items.last_name }}</td>
                        <td>{{ user_items.age }}</td>
                        <td>{{ user_items.temprature }}</td>
                        <td>{{ user_items.heart_rate }}</td>
                        {% if user_items.temprature > 38 or user_items.temprature < 35 %}
                            {% if user_items.heart_rate > 100 or user_items.heart_rate < 60 %}
                            <td>
                                <div style="background-color: #FF5733; color: #fff; padding: 10px; border-radius: 5px; text-align: center;">
                                    Critical
                                </div>
                            </td>
                            {% else %}
                                <td>
                                    <div style="background-color: #FFD700; color: #000; padding: 10px; border-radius: 5px; text-align: center;">
                                        Warning
                                    </div>
                                </td>
                            {% endif %}
                        {% elif user_items.heart_rate > 100 or user_items.heart_rate < 60 %}
                        <td>
                            <div style="background-color: #FFD700; color: #000; padding: 10px; border-radius: 5px; text-align: center;">
                                Warning
                            </div>
                        </td>
                        {% else %}
                            <td>
                                <div style="background-color: #4CAF50; color: #fff; padding: 10px; border-radius: 5px; text-align: center;">
                                    OK
                                </div>                                
                            </td>
                        {% endif %}
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- Include Bootstrap JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
{% endblock %}  

